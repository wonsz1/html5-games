<html>
<head>
</head>
<title>Simple Clock Animation</title>

<body>
<canvas id="canvas" height="300" width="300"></canvas>

</body>
<script>
	var sun = new Image();
	var earth = new Image();
	var moon = new Image();
	var canv;
	var ctx;

	window.onload = function()
	{
		sun.src = 'https://mdn.mozillademos.org/files/1456/Canvas_sun.png';
		moon.src = 'https://mdn.mozillademos.org/files/1443/Canvas_moon.png';
		earth.src = 'https://mdn.mozillademos.org/files/1429/Canvas_earth.png';

		canv = document.getElementById("canvas");
		ctx = canv.getContext("2d");
		setInterval(draw,100);
	}

	function draw()
	{
		ctx.globalCompositeOperation = 'destination-over';
		ctx.clearRect(0, 0, 300, 300);

		ctx.fillStyle = 'rgba(0, 0, 0, 0.4)';
		ctx.strokeStyle = 'rgba(0, 153, 255, 0.4';
		ctx.save();
		ctx.translate(150, 150);

		var time = new Date();
		
		drawEarth(time);
		
		ctx.save();

		drawMoon(time);

		ctx.restore();
		ctx.restore();

		drawEarthOrbit();

		drawSun();
	}

	function drawEarth(time)
	{
		ctx.rotate(
			getRadianRotationAngle(6) * time.getSeconds() + 
			getRadianRotationAngle(0.006) * time.getMilliseconds()
		);
		ctx.translate(105,0);
		ctx.fillRect(0,-12,50,24); // Shadow
		ctx.drawImage(earth,-12,-12);
	}

	function drawMoon(time)
	{
		ctx.rotate(
			getRadianRotationAngle(60) * time.getSeconds() +
			getRadianRotationAngle(0.06) * time.getMilliseconds()
		);
		ctx.translate(0, 28.5);
		ctx.drawImage(moon, -3.5, -3.5);
	}

	function drawEarthOrbit()
	{
		ctx.beginPath();
		ctx.arc(150, 150, 105, 0, getRadianRotationAngle(360), false); //Earth orbit
		ctx.stroke();
	}

	function drawSun()
	{
		ctx.drawImage(sun, 0, 0, 300, 300);
	}

	function getRadianRotationAngle(degrees)
	{
		return (degrees*Math.PI)/180;
	}
</script>
</html>